(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[200],{6300:function(e,t,a){Promise.resolve().then(a.bind(a,8451))},8451:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var s=a(9268),r=a(6394),i=a.n(r),n=a(6006),l=a(6758),o=a(8136),c=a(1033),d=a(3161),m=a(1347),u=a(5523);let x=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(m.fC,{ref:t,className:(0,u.cn)("relative flex w-full touch-none select-none items-center",a),...r,children:[(0,s.jsx)(m.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(m.e6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(m.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});x.displayName=m.fC.displayName;var b=a(7502);let h=b.fC,f=b.xz,g=n.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:i=4,...n}=e;return(0,s.jsx)(b.h_,{children:(0,s.jsx)(b.VY,{ref:t,align:r,sideOffset:i,className:(0,u.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});g.displayName=b.VY.displayName;var p=a(8919),w=a(1514);function j(){let[e,t]=(0,n.useState)(null),a=(0,n.useRef)(null),[r,m]=(0,n.useState)(!0),[b,j]=(0,n.useState)(100),[k,N]=(0,n.useState)("best"),v=e&&e.streams[0]?"best"===k?e.streams.reduce((e,t)=>t.bitrate>e.bitrate?t:e):e.streams.find(e=>e.name===k):null;return(0,n.useEffect)(()=>{async function e(e){if(e.origin===window.origin&&"play"===e.data.type){t({...e.data.data,streams:[]});let a=await fetch("/api/music/get-audio?storefront=".concat(e.data.storefront,"&id=").concat(encodeURIComponent(e.data.data.id))).then(e=>e.json());t({...e.data.data,streams:a.streams}),m(!0);let s=e.data.data.attributes;if("mediaSession"in navigator){let e=[];e=-1!=navigator.userAgent.indexOf("Mac OS X")?[{src:s.artwork.url.replace("{w}","450").replace("{h}","450").replace("{c}","bb").replace("{f}","webp"),sizes:"450x450",type:"image/webp"}]:[{src:s.artwork.url.replace("{w}",s.artwork.width).replace("{h}",s.artwork.height).replace("{c}","bb").replace("{f}","webp"),sizes:"".concat(s.artwork.width,"x").concat(s.artwork.height),type:"image/webp"}],navigator.mediaSession.metadata=new MediaMetadata({title:s.name,artist:s.artistName,album:s.albumName,artwork:e}),navigator.mediaSession.setActionHandler("play",function(){m(!0)}),navigator.mediaSession.setActionHandler("pause",function(){m(!1)})}}}return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,s.jsx)(s.Fragment,{children:e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(w.d.Root,{shouldScaleBackground:!0,children:[(0,s.jsx)(w.d.Trigger,{asChild:!0,className:"fixed bottom-0 z-30 lg:hidden",style:{backgroundColor:"#".concat(e.attributes.artwork.bgColor),backgroundImage:"linear-gradient(rgb(0 0 0/20%) 0 0)",color:"#".concat(e.attributes.artwork.textColor1)},children:(0,s.jsx)("div",{className:"m-4 flex w-[calc(100%-30px)] rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(i(),{src:e.attributes.artwork.url.replace("{w}",e.attributes.artwork.width).replace("{h}",e.attributes.artwork.height).replace("{c}","bb").replace("{f}","webp"),width:50,height:50,alt:"",className:"rounded-md"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-sm font-semibold",children:e.attributes.name}),(0,s.jsx)("h2",{className:"text-[0.6875rem]",style:{color:"#".concat(e.attributes.artwork.textColor2)},children:e.attributes.artistName})]})]})})}),(0,s.jsx)(w.d.Overlay,{className:"fixed inset-0 bg-black/40"}),(0,s.jsx)(w.d.Portal,{children:(0,s.jsx)(w.d.Content,{className:"fixed bottom-0 left-0 right-0 z-40 mt-24 flex h-[96%] flex-col rounded-t-[10px]",style:{backgroundColor:"#".concat(e.attributes.artwork.bgColor),backgroundImage:"linear-gradient(rgb(0 0 0/20%) 0 0)",color:"#".concat(e.attributes.artwork.textColor1)},children:(0,s.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,s.jsx)("div",{className:"mx-auto mb-8 h-1.5 w-12 flex-shrink-0 rounded-full bg-zinc-300"}),(0,s.jsxs)("div",{className:"px-8",children:[(0,s.jsx)(i(),{src:e.attributes.artwork.url.replace("{w}",e.attributes.artwork.width).replace("{h}",e.attributes.artwork.height).replace("{c}","bb").replace("{f}","webp"),width:e.attributes.artwork.width,height:e.attributes.artwork.height,alt:"",className:"w-full rounded-lg"}),(0,s.jsx)("h1",{className:"mt-4 text-2xl font-semibold",children:e.attributes.name}),(0,s.jsx)("h2",{className:"",style:{color:"#".concat(e.attributes.artwork.textColor2)},children:e.attributes.artistName}),(0,s.jsxs)("div",{className:"my-8 flex h-[200px] items-center justify-center gap-4",children:[(0,s.jsx)("button",{className:"justify-end",onClick:()=>{var e;null===(e=a.current)||void 0===e||e.seekTo(0)},children:(0,s.jsx)(l.RRT,{size:48})}),(0,s.jsx)("button",{onClick:()=>{m(!r)},children:r?(0,s.jsx)(l.xBX,{size:80,className:""}):(0,s.jsx)(l.PHf,{size:80,className:""})}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)(l.Aro,{size:48})})]})]})]})})})]}),(0,s.jsxs)("div",{className:"fixed bottom-0 z-20 hidden h-[100px] w-full flex-row items-center p-8 px-4 py-0 lg:flex",style:{backgroundColor:"#".concat(e.attributes.artwork.bgColor),backgroundImage:"linear-gradient(rgb(0 0 0/20%) 0 0)",color:"#".concat(e.attributes.artwork.textColor1)},children:[(0,s.jsxs)("div",{className:"relative flex min-w-[180px] items-center space-x-4 lg:w-[30%]",children:[(0,s.jsx)(i(),{src:e.attributes.artwork.url.replace("{w}",e.attributes.artwork.width).replace("{h}",e.attributes.artwork.height).replace("{c}","bb").replace("{f}","webp"),width:56,height:56,alt:"",className:"rounded-md"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-sm font-semibold",children:e.attributes.name}),(0,s.jsx)("h2",{className:"text-[0.6875rem]",style:{color:"#".concat(e.attributes.artwork.textColor2)},children:e.attributes.artistName})]})]}),(0,s.jsx)("div",{className:"flex w-[40%] max-w-[722px] items-center justify-center",children:e.streams[0]?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-center gap-4",children:[(0,s.jsx)("button",{className:"justify-end",onClick:()=>{var e;null===(e=a.current)||void 0===e||e.seekTo(0)},children:(0,s.jsx)(l.RRT,{size:32})}),(0,s.jsx)("button",{onClick:()=>{m(!r)},children:r?(0,s.jsx)(l.xBX,{size:48,className:""}):(0,s.jsx)(l.PHf,{size:48,className:""})}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)(l.Aro,{size:32})})]})}):(0,s.jsx)(c.Z7b,{size:48,className:"animate-spin p-2"})}),(0,s.jsxs)("div",{className:"flex w-[30%] min-w-[180px] justify-center lg:justify-end",children:[e.streams[0]&&(0,s.jsxs)(h,{children:[(0,s.jsx)(f,{className:"mr-4 font-semibold",children:"best"===k?v.name:k}),(0,s.jsxs)(g,{style:{backgroundColor:"#".concat(e.attributes.artwork.bgColor),backgroundImage:"linear-gradient(rgb(0 0 0/20%) 0 0)",color:"#".concat(e.attributes.artwork.textColor1)},children:[(0,s.jsx)("h1",{className:"text-lg font-semibold",children:"Streaming Quality"}),(0,s.jsx)("div",{className:"flex flex-col",children:e.streams.map((e,t)=>(0,s.jsxs)("button",{className:"my-2 text-left",onClick:()=>{N(e.name),p.toast.success("Switched quality to ".concat(e.name,"!"))},children:[(0,s.jsx)("h2",{className:"font-semibold",children:e.name}),(0,s.jsx)("h3",{className:"text-sm",children:"FLAC"===e.name?"".concat(e.sampleBits,"-bit / ").concat(e.bitrate," kHz FLAC"):"".concat(e.bitrate," Kbps ").concat(e.name)})]},t))})]})]}),(0,s.jsx)(o.z2x,{size:24}),(0,s.jsx)(x,{defaultValue:[b],max:100,className:"ml-2 w-24",onValueChange:e=>{j(e[0])},style:{"--primary":"".concat((0,u.YM)("#".concat(e.attributes.artwork.textColor1))),"--secondary":"".concat((0,u.YM)("#".concat(e.attributes.artwork.bgColor)))}})]})]}),(0,s.jsx)(d.Z,{url:v?v.url:"",playing:r,width:0,height:0,ref:a,volume:b/100,onEnded:()=>{m(!1)},config:{youtube:{embedOptions:{host:"https://www.youtube-nocookie.com"}}}})]})})}},5523:function(e,t,a){"use strict";a.d(t,{YM:function(){return n},cn:function(){return i}});var s=a(3831),r=a(293);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m)((0,s.W)(t))}function n(e){let t=0,a=0,s=0;4===e.length?(t=parseInt(e[1]+e[1],16),a=parseInt(e[2]+e[2],16),s=parseInt(e[3]+e[3],16)):7===e.length&&(t=parseInt(e[1]+e[2],16),a=parseInt(e[3]+e[4],16),s=parseInt(e[5]+e[6],16));let r=Math.min(t/=255,a/=255,s/=255),i=Math.max(t,a,s),n=i-r,l=0,o=0,c=0;return(l=Math.round(60*(l=0===n?0:i===t?(a-s)/n%6:i===a?(s-t)/n+2:(t-a)/n+4)))<0&&(l+=360),c=(i+r)/2,""+l+","+ +(100*(0===n?0:n/(1-Math.abs(2*c-1)))).toFixed(1)+"%,"+(c=+(100*c).toFixed(1))+"%"}}},function(e){e.O(0,[141,855,776,90,735,161,110,667,488,744],function(){return e(e.s=6300)}),_N_E=e.O()}]);